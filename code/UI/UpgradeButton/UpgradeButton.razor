@using Sandbox;
@using Sandbox.UI;
@using Sandbox.UI.Construct;
@using Sandbox.Menu;
@using System;
@using System.Collections.Generic;
@using System.Linq;
@attribute [StyleSheet]

@namespace PizzaClicker

<root onclick=@Pressed class=@CanAfford >

    <div class="button">
        <img src=@Upgrade.Icon class="icon" />
    </div>

    <div class="hover-info">
        <div class="header">
            <img src=@Upgrade.Icon class="icon" />
            <div class="info">
                <p class="name">@Upgrade.Name</p>
                <p class="count">Upgrade</p>
            </div>
            <p class="price">@(CostString) pizzas</p>
        </div>
        <div class="body">
            <p>@Upgrade.Description</p>
        </div>
    </div>

</root>

@code
{
    Panel ProgressBar { get; set; }

    // Code References
    public Upgrade Upgrade { get; set; }
    public Player Player { get; set; }

    // string that returns Cost as string with commas
    string CostString => NumberHelper.ToStringAbbreviated(Upgrade.Cost);
    string CanAfford => (Player.Pizzas >= Upgrade.Cost) ? "" : "cant-afford";

    void Pressed()
    {
        Player.GiveUpgrade(Upgrade.Ident);
    }

    protected override int BuildHash()
    {
        return HashCode.Combine(CanAfford);
    }
}